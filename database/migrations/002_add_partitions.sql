-- 添加缺失的分区（2025年4-12月）
-- 如果您的数据库已经创建，但缺少后续月份的分区，运行此脚本

-- 2025-04
CREATE TABLE IF NOT EXISTS dex_transactions_2025_04 PARTITION OF dex_transactions
    FOR VALUES FROM (1711929600) TO (1714521600); -- 2025-04-01 to 2025-05-01

-- 2025-05
CREATE TABLE IF NOT EXISTS dex_transactions_2025_05 PARTITION OF dex_transactions
    FOR VALUES FROM (1714521600) TO (1717200000); -- 2025-05-01 to 2025-06-01

-- 2025-06
CREATE TABLE IF NOT EXISTS dex_transactions_2025_06 PARTITION OF dex_transactions
    FOR VALUES FROM (1717200000) TO (1719792000); -- 2025-06-01 to 2025-07-01

-- 2025-07
CREATE TABLE IF NOT EXISTS dex_transactions_2025_07 PARTITION OF dex_transactions
    FOR VALUES FROM (1719792000) TO (1722470400); -- 2025-07-01 to 2025-08-01

-- 2025-08
CREATE TABLE IF NOT EXISTS dex_transactions_2025_08 PARTITION OF dex_transactions
    FOR VALUES FROM (1722470400) TO (1725148800); -- 2025-08-01 to 2025-09-01

-- 2025-09
CREATE TABLE IF NOT EXISTS dex_transactions_2025_09 PARTITION OF dex_transactions
    FOR VALUES FROM (1725148800) TO (1727740800); -- 2025-09-01 to 2025-10-01

-- 2025-10
CREATE TABLE IF NOT EXISTS dex_transactions_2025_10 PARTITION OF dex_transactions
    FOR VALUES FROM (1727740800) TO (1730419200); -- 2025-10-01 to 2025-11-01

-- 2025-11
CREATE TABLE IF NOT EXISTS dex_transactions_2025_11 PARTITION OF dex_transactions
    FOR VALUES FROM (1730419200) TO (1733011200); -- 2025-11-01 to 2025-12-01

-- 2025-12
CREATE TABLE IF NOT EXISTS dex_transactions_2025_12 PARTITION OF dex_transactions
    FOR VALUES FROM (1733011200) TO (1735689600); -- 2025-12-01 to 2026-01-01

-- 完成
SELECT 'Missing partitions added successfully!' AS status;
